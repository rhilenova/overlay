{% load mathfilters %}

.css-slideshow {
position: relative;
max-width: 495px;
height: 370px;
margin: 1em auto .5em auto;
font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
font-weight: 300;
}

.css-slideshow figure {
margin: 0 auto;
width: 495px;
height: 370px;
background: #000;
position: absolute;
display: flex;
}

.css-slideshow img {
-webkit-box-shadow: 0 0 2px #666;
box-shadow: 0 0 2px #666;
max-width: 495px;
max-height: 370px;
margin: auto;
}

.css-slideshow figcaption {
position: absolute;
top: 0px;
color: #fff;
background: rgba(0,0,0, .3);
font-size: .8em;
padding: 8px 12px;
-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
}

.css-slideshow-attr {
max-width: 530px;
text-align: right;
font-size: .7em;
font-style: italic;
}

.css-slideshow-attr a {
color: #666;
}


{% for image in images %}
.css-slideshow figure:nth-child({{ forloop.counter }}) {
-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
filter: alpha(opacity=0);
opacity: 0;
}

.css-slideshow figure:nth-child({{ forloop.counter }}) {
-webkit-animation: xfade {{ images|length|mul:8 }}s {{ forloop.counter|sub:1|mul:8 }}s  infinite;
-moz-animation: xfade {{ images|length|mul:8 }}s {{ forloop.counter|sub:1|mul:8 }}s  infinite;
-ms-animation: xfade {{ images|length|mul:8 }}s {{ forloop.counter|sub:1|mul:8 }}s infinite;
-o-animation: xfade {{ images|length|mul:8 }}s {{ forloop.counter|sub:1|mul:8 }}s infinite;
animation: xfade {{ images|length|mul:8 }}s {{ forloop.counter|sub:1|mul:8 }}s infinite;
}
{% endfor %}

{% with num_images=images|length %}
@keyframes "xfade" {
 0% {
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
   	filter: alpha(opacity=100);
   	opacity: 1;
 }
 {{ 100.0|div:num_images|sub:2 }}% {
	-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
	filter: alpha(opacity=100);
	opacity: 1;
 }
 {{ 100.0|div:num_images }}% {
	-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
	filter: alpha(opacity=0);
	opacity: 0;
 }
 98% {
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
   	filter: alpha(opacity=0);
   	opacity: 0;
 }
 100% {
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
   	filter: alpha(opacity=100);
   	opacity: 1;
 }
}
@-moz-keyframes xfade {
 0% {
   filter: alpha(opacity=100);
   opacity: 1;
 }
 {{ 100.0|div:num_images|sub:2 }}% {
	filter: alpha(opacity=100);
	opacity: 1;
 }
 {{ 100.0|div:num_images }}% {
	filter: alpha(opacity=0);
	opacity: 0;
 }
 98% {
   filter: alpha(opacity=0);
   opacity: 0;
 }
 100% {
   filter: alpha(opacity=100);
   opacity: 1;
 }
}
@-webkit-keyframes "xfade" {
 0% {
   filter: alpha(opacity=100);
   opacity: 1;
 }
 {{ 100.0|div:num_images|sub:2 }}% {
	filter: alpha(opacity=100);
	opacity: 1;
 }
 {{ 100.0|div:num_images }}% {
	filter: alpha(opacity=0);
	opacity: 0;
 }
 98% {
   filter: alpha(opacity=0);
   opacity: 0;
 }
 100% {
   filter: alpha(opacity=100);
   opacity: 1;
 }
}
@-ms-keyframes "xfade" {
 0% {
   -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
   filter: alpha(opacity=100);
   opacity: 1;
 }
 {{ 100.0|div:num_images|sub:2 }}% {
	-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
	filter: alpha(opacity=100);
	opacity: 1;
 }
 {{ 100.0|div:num_images }}% {
	-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
	filter: alpha(opacity=0);
	opacity: 0;
 }
 98% {
   -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
   filter: alpha(opacity=0);
   opacity: 0;
 }
 100% {
   -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
   filter: alpha(opacity=100);
   opacity: 1;
 }
}
@-o-keyframes "xfade" {
 0% {
   filter: alpha(opacity=100);
   opacity: 1;
 }
 {{ 100.0|div:num_images|sub:2 }}% {
	filter: alpha(opacity=100);
	opacity: 1;
 }
 {{ 100.0|div:num_images }}% {
	filter: alpha(opacity=0);
	opacity: 0;
 }
 98% {
   filter: alpha(opacity=0);
   opacity: 0;
 }
 100% {
   filter: alpha(opacity=100);
   opacity: 1;
 }
}
{% endwith %}
